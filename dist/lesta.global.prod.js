(()=>{function m(n){return n?typeof n=="object"?JSON.parse(JSON.stringify(n)):n:n??null}function j(n,t,e){let o;try{for(o=0;o<t.length-1;o++)n=n[t[o]];return e!==void 0&&(n[t[o]]=e),n[t[o]]}catch{}}function V(n,t){let e={};return n.forEach(o=>Object.assign(e,{[o]:t})),e}function R(n,t=120){return function(...o){let i=this.lastCall;this.lastCall=Date.now(),i&&this.lastCall-i<=t&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout(()=>n(...o),t)}}function z(n,t=50){let e;return function(...i){e||(e=setTimeout(()=>{n(...i),clearTimeout(e),e=null},t))}}function W(n){let t,e,o=new Promise((i,s)=>{e=()=>{o.delaying=!1,clearTimeout(t),s()},t=setTimeout(()=>{o.delaying=!1,clearTimeout(t),i()},n||0)});return o.stop=e,o.delaying=!0,o}async function x(n,t){if(typeof n=="function"){let e=n();return!(e instanceof Promise)||t?.aborted?void 0:(await(async()=>t?t.aborted?void 0:await Promise.race([e,new Promise(s=>t.addEventListener("abort",()=>s()))]):await e)())?.default}return n}function O(n,t){for(let[e,o]of n)if(Array.isArray(o)){let i=o.indexOf(t);i!==-1&&(o.length===1?n.delete(e):o.splice(i,1))}else o===t&&n.delete(e)}function N(n){let t=document.createElement("table");return t.innerHTML=n,t}function B(n){function t(r){let c=r.querySelectorAll("script");for(let a of c)a.remove()}function e(r,c){let a=c.replace(/\s+/g,"").toLowerCase();if(["src","href","xlink:href"].includes(r)&&(a.includes("javascript:")||a.includes("data:text/html"))||r.startsWith("on"))return!0}function o(r){let c=r.attributes;for(let{name:a,value:p}of c)e(a,p)&&r.removeAttribute(a)}function i(r){let c=r.children;for(let a of c)o(a),i(a)}let s=N(n);return t(s),i(s),s.childNodes}function F(){let n=new Uint32Array(4);window.crypto.getRandomValues(n);let t=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{t++;let o=n[t>>3]>>t%8*4&15;return(e==="x"?o:o&3|8).toString(16)})}var M=()=>{let n=[],t=!1,e=()=>n.length,o=()=>n.length===0,i=r=>{n.push(r),t||(t=!0,s())},s=async()=>{let r=n.at(0);r?(await r(),n.shift(),s()):t=!1};return{add:i,isEmpty:o,size:e}};function C(n){return Object.freeze(n),Object.getOwnPropertyNames(n).forEach(t=>{let e=n[t];e!==null&&(typeof e=="object"||typeof e=="function")&&!Object.isFrozen(e)&&C(e)}),n}async function $(n,t,e,o){let i=0,s=[async()=>await n.loaded(),async()=>{if(n.context.container=t(),typeof document<"u")return await n.rendered()},async()=>(await n.props(o),n.params(),n.methods(),n.proxies(),await n.created()),async()=>{if(await n.nodes(),typeof document<"u")return await n.mounted()}];for await(let r of s){let c=await r();if(i++,n.context.abortSignal?.aborted||c){e&&e({status:i,data:c,abortSignal:n.context.abortSignal});return}}return n.context.container}function y(n,t,e){let o=(i,s)=>{let r=i.split("."),c=s.split(".");for(let a=0;a<c.length;a++)if(r[a]!==c[a])return!1;return!0};for(let[i,s]of n)if(Array.isArray(s))s.includes(t)&&i(e);else if(o(t,s)){let r=[...t.split(".")||[]];r.shift(),i(e,r)}}function b(n,t,e=""){if(typeof n!="object"||n===null)return n;let o={getPrototypeOf(i){return{target:i,instance:"Proxy"}},get(i,s,r){return t.get?.(i,`${e}${s}`),Reflect.get(i,s,r)},set(i,s,r,c){return t.beforeSet(r,`${e}${s}`,p=>r=p)||(Reflect.get(i,s,c)!==r||s==="length"||s.startsWith("__"))&&(r=m(r),r=b(r,t,`${e}${s}.`),Reflect.set(i,s,r,c),t.set(i,r,`${e}${s}`)),!0},deleteProperty(i,s){return Reflect.deleteProperty(i,s)},defineProperty(i,s,r){return Reflect.defineProperty(i,s,r)}};for(let i in n)n[i]=b(n[i],t,`${e}${i}.`);return new Proxy(n,o)}var T=(n,t,e="")=>{};var I=class{constructor(t,e,o){this.store=t,this.context={name:o,...e.plugins,options:t,reactivity:new Map,param:{},method:{},source:this.store.sources}}async loaded(){this.store.loaded&&await this.store.loaded.bind(this.context)()}create(){this.context.param=this.store.params,Object.preventExtensions(this.context.param);for(let t in this.store.methods)this.context.method[t]=(...e)=>{if(e.length&&(e.length>1||typeof e[0]!="object"))return T(this.context.name,403,t);let o={...m(e[0])};return this.store.middlewares&&t in this.store.middlewares?(async()=>{let i=await this.store.middlewares[t].bind(this.context)(o);return i&&typeof i!="object"?T(this.context.name,404,t):(o&&i&&Object.assign(o,i),this.store.methods[t].bind(this.context)(o))})():this.store.methods[t].bind(this.context)(o)};this.context.proxy=b(this.store.proxies,{beforeSet:(t,e,o)=>{if(this.store.setters?.[e]){let i=this.store.setters[e].bind(this.context)(t);if(i===void 0)return!0;o(i)}},set:async(t,e,o)=>{y(this.context.reactivity,o,e)}}),Object.preventExtensions(this.context.proxy)}async created(){this.store.created&&await this.store.created.bind(this.context)()}params(t){return this.context.param[t]}proxies(t,e){let o=(i,s)=>e.proxy[t](i,s);return this.context.reactivity.set(o,t),e.unstore||(e.unstore={}),e.unstore[t]=()=>{this.context.reactivity.delete(o)},this.context.proxy[t]}methods(t){return this.context.method[t]}};function k(n={}){return{app:{},stores:{},async get(t){if(!n)return T(t,401);if(!this.stores.hasOwnProperty(t)){let e=await x(n[t]);if(!e)return T(t,402);let o=new I(e,this.app,t);this.stores[t]=o,await o.loaded(),o.create(),await o.created()}return this.stores[t]},destroy(){delete this.stores},init(t){this.app=t,t.plugins.store={get:this.get.bind(this),destroy:this.destroy.bind(this)}}}}var q={get isBrowser(){return typeof window<"u"&&typeof document<"u"}};function J(n){if(n.mixins?.length){let t=["selectors","directives","params","proxies","methods","handlers","setters","sources"],e=["params","proxies","methods"],o=["loaded","rendered","created","mounted","unmounted"],i={props:{}},s=(c,a,p)=>({...c[p],...a[p]}),r=c=>{i.template=n.template||c.template,t.forEach(p=>{i[p]=s(i,c,p)}),o.forEach(p=>{let d=i[p];i[p]=async function(){let g=await d?.bind(this)();return g||(g=await c[p]?.bind(this)()),g}}),e.forEach(p=>{i.props[p]=s(i.props,c.props||{},p)});let a=i.nodes;i.nodes=function(){return{...a?.bind(this)(),...c.nodes?.bind(this)()}}};return n.mixins.forEach(c=>{r(J(c))}),r(n),i}return n}var h=(n="root",t,e="")=>{};function X(n,t,e,o){let i={...t.context.options};if(e.section){let s=e.section,r=n.section[s];return r?(o||(r.innerHTML=i.template),r.nodepath=n.nodepath+"."+s,r.nodename=s,r.unmount=async()=>{t.destroy(r),await t.unmount(),r.innerHTML=""},r):h(n.nodename,202,s)}else{if(n.hasAttribute("iterate")){if(!n.iterableElement){if(!i.template)return h(n.nodepath,209);let r=N(i.template);if(r.children.length>1)return h(n.nodepath,210);n.iterableElement=r.children[0],n.innerHTML=""}o||n.insertAdjacentElement("beforeEnd",n.iterableElement.cloneNode(!0));let s=n.children[n.children.length-1];return s.nodepath=n.nodepath,n.unmount||(n.unmount=async()=>{t.destroy(n),await n.removeChildren()}),s.setAttribute("iterable",""),s.unmount=async()=>{t.destroy(s),await t.unmount(),s.remove()},s}else i.template&&!o&&(n.innerHTML=i.template);return n.unmount=async()=>{t.destroy(n),await t.unmount(),n.innerHTML=""},n}}var L=class{constructor(t,e,o){this.component=t,this.app=e,this.proxiesData={},this.context={...e.plugins,abortSignal:o,options:t,container:null,node:{},param:{},method:{},proxy:{},source:t.sources||{}}}async aborted(t){if(this.component.aborted)return await this.component.aborted.bind(this.context)(t)}async loaded(){if(this.component.loaded)return await this.component.loaded.bind(this.context)()}async rendered(){if(typeof this.component!="object")return h(this.context.container.nodepath,211);if(this.component.rendered)return await this.component.rendered.bind(this.context)()}async created(){if(this.component.created)return await this.component.created.bind(this.context)()}methods(){if(this.context.container.method||(this.context.container.method={}),this.component.methods)for(let[t,e]of Object.entries(this.component.methods))this.context.method[t]=e.bind(this.context),this.context.container.method[t]=(...o)=>this.context.method[t](...m(o));Object.preventExtensions(this.context.method)}params(){if(this.component.params){for(let t in this.component.params)if(t in this.context.param)return h(this.context.container.nodepath,213,t);Object.assign(this.context.param,m(this.component.params))}Object.preventExtensions(this.context.param)}proxies(){if(this.component.proxies)for(let t in this.component.proxies){if(t in this.proxiesData)return h(this.context.container.nodepath,214,t);this.proxiesData[t]=this.component.proxies[t]}this.context.proxy=this.getProxy(),Object.preventExtensions(this.context.proxy)}};var Q={update:async(n,t)=>{let e=typeof t=="function"?await t(n):t;e!==void 0&&(n.innerHTML="",n.append(...B(e)))}};var U={update:async(n,t)=>{let e=typeof t=="function"?await t(n):t;e!==void 0&&(n.innerHTML=e)}};var Y={update:(n,t,e)=>{(typeof t[e]=="function"?t[e](n):t[e])?n.classList.add(e):n.classList.remove(e)}};var G={update:async(n,t)=>{let e=typeof t=="function"?await t(n):t;e!==void 0&&(n.textContent=e)}};var u=(n,t,e="")=>{};var tt={refs:[],collect:!1,exclude(n){this.collect=!1;let t=n();return this.collect=!0,t},define(n){return n&&n.startsWith("_")?this.refs[0]:[...this.refs]},clear(){this.collect=!1,this.refs.length=0}};var E=class extends L{constructor(t,e,o,i){super(t,e,o),this.Nodes=i,this.impress=tt,this.context={...this.context,exclude:this.impress.exclude.bind(this.impress),directives:{_html:Q,_evalHTML:U,_class:Y,_text:G,...e.directives,...t.directives},root:e.root}}async props(){}async mounted(){this.component.mounted&&await this.component.mounted.bind(this.context)()}getProxy(){return b(this.proxiesData,{beforeSet:(t,e,o)=>{if(this.component.setters?.[e]){let i=this.component.setters[e].bind(this.context)(t);if(i===void 0)return!0;o(i)}},set:(t,e,o)=>{for(let i in this.context.node){let s=this.context.node[i];s.reactivity.node&&y(s.reactivity.node,o),s.reactivity.component&&y(s.reactivity.component,o,e);for(let r in s.section)s.section[r]?.reactivity.component&&y(s.section[r].reactivity.component,o,e)}this.component.handlers?.[o]?.bind(this.context)(e)},get:(t,e)=>{this.impress.collect&&!this.impress.refs.includes(e)&&this.impress.refs.push(e)}})}async nodes(){if(this.component.nodes){let t=this.component.nodes.bind(this.context)(),e=this.context.container;for await(let[o,i]of Object.entries(t)){let s=this.component.selectors&&this.component.selectors[o]||`.${o}`,r=e.querySelector(s)||e.classList.contains(o)&&e,c=e.nodepath?e.nodepath+"."+o:o;if(r){if(r.nodepath=c,r.nodename=o,Object.assign(this.context.node,{[o]:r}),i){let a=new this.Nodes(i,this.context,r,this.impress,this.app,o);for await(let[p]of Object.entries(i))await a.controller(p)}}else u(c,105)}Object.preventExtensions(this.context.node)}}};var f=(n="root",t,e,o,i="")=>{};var K=class{constructor(t,e,o){this.props=t,this.context=e,this.container=e.container,this.app=o}async setup(t){if(this.props.proxies&&Object.keys(this.props.proxies).length&&!t?.proxies)return f(this.container.nodepath,306);if(this.container.proxy||(this.container.proxy={}),t)return await this.params(t.params),await this.methods(t.methods),await this.proxies(t.proxies)}async proxies(t){if(t){for(let o in this.props.proxies)if(!t.hasOwnProperty(o))return f(this.container.nodepath,"proxies",o,301);let e={};for(let o in t){let i=t[o];if(typeof i!="object")return f(this.container.nodepath,"proxies",o,302);let s=p=>{if(i.required&&p==null)return f(this.container.nodepath,"proxies",o,303);let d=p??i.default??null;return d&&i.type&&i.type==="array"&&!Array.isArray(d)&&typeof d!==i.type?f(this.container.nodepath,"proxies",o,304,i.type):d},r=this.context;this.container.proxy[o]=(p,d)=>{d&&d.length!==0?j(r.proxy[o],d,p):r.proxy[o]=s(p)};let c=null,{store:a}=i;if(this.props.proxies&&o in this.props.proxies)c=this.props.proxies[o];else if(a){let p=await this.context.store.get(a);if(!p)return f(this.container.nodepath,"proxies",o,307,a);c=p.proxies(o,this.container)}e[o]=m(s(c))}return e}}async params(t){for(let e in t){let o=t[e];if(typeof o!="object")return f(this.container.nodepath,"params",e,302);let i=async()=>{let{store:r}=o;if(r){let c=await this.context.store.get(r);if(!c)return f(this.container.nodepath,"params",e,307,r);let a=c.params(e);return m(a)}else{let c=this.props?.params[e];return c instanceof Promise||c instanceof HTMLCollection||c instanceof NodeList||c instanceof Element||e.startsWith("__")?c:m(c)}},s=this.context.param[e]=await i()??(o.required&&f(this.container.nodepath,"params",e,303)||o.default);s&&o.type&&o.type==="array"&&!Array.isArray(s)&&typeof s!==o.type&&f(this.container.nodepath,"params",e,304,o.type),o.readonly&&Object.defineProperty(this.context.param,e,{writable:!1})}}async methods(t){for(let e in t){let o=t[e];if(typeof o!="object")return f(this.container.nodepath,"methods",e,302);let{store:i}=o;if(i){let s=await this.context.store.get(i);if(!s)return f(this.container.nodepath,"methods",e,307,i);let r=s.methods(e);if(!r)return f(this.container.nodepath,"methods",e,305,i);this.context.method[e]=(...c)=>r(...m(c))}else{let s=this.props.methods&&e in this.props.methods;if(o.required&&!s)return f(this.container.nodepath,"methods",e,303);s&&(this.context.method[e]=(...r)=>{this.props.methods[e](...m(r))})}}}},et={async init(n,t,e,o){return await new K(n,e,o).setup(t)}};var D=class extends E{constructor(...t){super(...t)}async props(t){this.proxiesData=await et.init(t,this.component.props,this.context,this.app)||{}}destroy(t){delete t.proxy,delete t.method;for(let e in t.unstore)t.unstore[e]();delete t.unmount}async unmount(){if(this.context.node)for await(let t of Object.values(this.context.node)){if(t.unmount&&!t.hasAttribute("iterable")){if(t.section)for await(let e of Object.values(t.section))await e.unmount&&e.unmount();await t.unmount()}if(t.directives)for await(let e of Object.values(t.directives))e.destroy&&e.destroy()}this.component.unmounted&&await this.component.unmounted.bind(this.context)()}};var l=class{constructor(t,e,o,i,s,r){this.app=s,this.node=t,this.context=e,this.impress=i,this.nodeElement=o,this.keyNode=r,this.nodeElement.reactivity={node:new Map}}reactive(t,e,o){t.length&&o.set(e,t),this.impress.clear()}reactiveNode(t,e){this.reactive(t,e,this.nodeElement.reactivity.node)}};var ot={collect(n,t,e,o){return{proxies:this.proxies(t),params:this.params(n.params,e,o),methods:this.methods(n.methods),section:n.section}},proxies(n){if(n)return n||{}},methods(n){let t={};if(n)for(let[e,o]of Object.entries(n))typeof o=="function"&&Object.assign(t,{[e]:o});return t},params(n,t,e){let o={};if(n)for(let[i,s]of Object.entries(n)){let r=null;typeof s=="function"&&s.name?r=t?s(t,e):s():r=s,Object.assign(o,{[i]:r})}return o}};function nt(n,t,e,o,i){if(n.sections){let s=async(r,c)=>{if(n.iterate)return h(e.section[r].nodepath,204);e.section[r].unmount&&await e.section[r].unmount(),c.src&&(c.section=r,await i(t,e,c,o(c.proxies,e.section[r],r)))};e.section={};for(let[r,c]of Object.entries(n.sections)){if(c.induce||c.iterate)return h(e.section[r].nodepath,215);let a=e.querySelector(`[section="${r}"]`);if(!a)return h(e.nodepath,201,r);a.reactivity||(a.reactivity={component:new Map}),Object.assign(e.section,{[r]:a}),c.src&&s(r,c),a.mount=async p=>await s(r,p||c)}}}var v=class extends l{constructor(...t){super(...t),this.nodeElement.reactivity.component=new Map}reactiveComponent(t,e,o){let i=o||this.nodeElement;this.reactive(t,e,i.reactivity.component)}reactivate(t,e,o,i,s){let r={};if(t)for(let[c,a]of Object.entries(t))if(typeof a=="function"&&a.name){this.impress.collect=!0;let p=o&&a.length?a(o[i],i):a(s);Object.assign(r,{[c]:p}),e(c,a),this.impress.clear()}else Object.assign(r,{[c]:a});return r}async create(t,e,o,i,s,r){if(!o.src)return h(e.nodepath,203);let c=await this.app.mount(o.src,o.abortSignal,o.aborted,e,ot.collect(o,i,s,r));c&&nt(o,t,c,(a,p,d)=>r!==void 0?t(a,c.section[d],r):t(a,p),this.create.bind(this))}};var _=class extends v{constructor(...t){super(...t),this.queue=M(),this.name=null,this.created=!1,this.nodeElement.removeChildren=async()=>await this.remove.bind(this)(0)}async init(){if(typeof this.node.component.iterate!="function")return h(this.nodeElement.nodepath,205);if(this.createIterate=async t=>{let e=this.proxies(this.node.component.proxies,this.nodeElement.children[t],t);await this.create(this.proxies.bind(this),this.nodeElement,this.node.component,e,this.data[t],t),this.created=!0},this.impress.collect=!0,this.data=this.node.component.iterate(),this.data){if(!Array.isArray(this.data))return h(this.nodeElement.nodepath,206);this.name=this.impress.refs.at(-1),this.impress.clear(),this.nodeElement.setAttribute("iterate",""),Object.getPrototypeOf(this.data).instance==="Proxy"&&(this.reactiveComponent([this.name],async e=>{this.data=this.node.component.iterate(),e.length&&this.queue.add(async()=>{if(this.node.component.proxies){for(let[o,i]of Object.entries(this.node.component.proxies))if(typeof i=="function"&&i.name&&i.length)for(let s=0;s<Math.min(this.nodeElement.children.length,e.length);s++){let r=i(this.data[s],s);this.nodeElement.children[s].proxy[o](r),this.sections(this.node.component.sections,this.nodeElement.children[s],s)}}}),this.queue.add(async()=>await this.length(e.length))}),this.reactiveComponent([this.name+".length"],async e=>{this.queue.add(async()=>await this.length(e))}));let t=async()=>await this.add(this.data.length);if(this.node.component.induce){if(typeof this.node.component.induce!="function")return h(this.nodeElement.nodepath,212);this.impress.collect=!0;let e=this.node.component.induce();this.reactiveNode(this.impress.define(),async()=>{this.node.component.induce()?this.nodeElement.children.length||await t():await this.nodeElement.removeChildren()}),e&&await t()}else await t()}}sections(t,e,o){if(t)for(let[i,s]of Object.entries(t))for(let[r,c]of Object.entries(s.proxies))typeof c=="function"&&c.name&&c.length&&(e.section[i]?.proxy[r](c(this.data[o],o)),this.sections(s.sections,e.section[i],o))}proxies(t,e,o){let i=(s,r)=>{this.impress.refs.some(c=>c.includes(this.name))?this.reactiveComponent(this.impress.define(s),async(c,a)=>{this.queue.add(async()=>{if(a)a.shift(),this.nodeElement.children[o]?.proxy[s](c,a);else if(this.data=this.node.component.iterate(),o<this.data.length){let p=r(this.data[o],o);this.nodeElement.children[o]?.proxy[s](p)}})},e):this.created?this.impress.clear():this.reactiveComponent(this.impress.define(s),async(c,a)=>{this.queue.add(async()=>{for(let p=0;p<this.nodeElement.children.length;p++)a?this.nodeElement.children[p].proxy[s](c,a):this.nodeElement.children[p].proxy[s](r())})},e)};return this.reactivate(t,i,this.data,o)}async length(t){if(this.data.length===t){let e=this.nodeElement.children.length;t>e&&await this.add(t),t<e&&await this.remove(t)}}async add(t){let e=this.nodeElement.children.length;for(;t>e;)await this.createIterate(e),e++}async remove(t){let e=this.nodeElement.children.length;for(;t<e;)e--,O(this.nodeElement.reactivity.component,this.name+"."+e),await this.nodeElement.children[e].unmount()}};var P=class extends v{constructor(...t){super(...t)}async init(){let t=()=>this.create(this.proxies.bind(this),this.nodeElement,this.node.component,this.proxies(this.node.component.proxies,this.nodeElement)),e=async()=>await t();if(this.node.component.induce){if(typeof this.node.component.induce!="function")return h(this.nodeElement.nodepath,212);this.impress.collect=!0;let o=this.node.component.induce();this.reactiveNode(this.impress.define(),async()=>{this.node.component.induce()?this.nodeElement.unmount||await e():await this.nodeElement.unmount?.()}),o&&await e()}else await e()}proxies(t,e){let o=(i,s)=>this.reactiveComponent(this.impress.define(i),(r,c)=>{e.proxy&&e.proxy[i]&&(c?e.proxy[i](r,c):e.proxy[i](s()))},e);return this.reactivate(t,o,null,null,e)}};var A=class extends l{constructor(...t){super(...t)}init(t){if(t[0]!=="_")return u(this.nodeElement.nodepath,102,t);let e=this.context.directives[t],o=this.node[t],{create:i,update:s,destroy:r}=e;"directives"in this.nodeElement||Object.assign(this.nodeElement,{directives:{}}),Object.assign(this.nodeElement.directives,{[t]:{create:()=>i?i(this.nodeElement,o,e):{},destroy:()=>r?r(this.nodeElement,o,e):{}}}),i&&this.nodeElement.directives[t].create();let c=(a,p,d)=>{typeof a=="function"?(this.impress.collect=!0,s.bind(e)(this.nodeElement,p,d),this.reactiveNode(this.impress.define(),()=>s(this.nodeElement,p,d))):s.bind(e)(this.nodeElement,p,d)};if(s!=null)if(typeof o=="object")for(let a in o)c(o[a],o,a);else c(o,o)}};var H=class extends l{constructor(...t){super(...t)}listeners(t){typeof this.node[t]=="function"&&(this.nodeElement[t]=e=>this.node[t].bind(this.context)(e))}general(t){if(t==="innerHTML")return u(this.nodeElement.nodepath,106);if(typeof this.node[t]=="function"){let e=()=>{let o=this.node[t].bind(this.context)(this.nodeElement);this.nodeElement[t]!==null&&typeof this.nodeElement[t]=="object"?o!==null&&typeof o=="object"?Object.assign(this.nodeElement[t],o):u(this.nodeElement.nodepath,103,t):this.nodeElement[t]=o!==Object(o)?o:JSON.stringify(o)};this.impress.collect=!0,e(),this.reactiveNode(this.impress.define(),e)}else this.nodeElement[t]=this.node[t]}init(t){t.substr(0,2)==="on"?this.listeners(t):this.general(t)}};var w=class{constructor(t,e,o,i,s,r){this.app=s,this.node=t,this.context=e,this.impress=i,this.nodeElement=o,this.keyNode=r,this.directive=new A(t,e,o,i,s,r),this.native=new H(t,e,o,i,s,r)}async controller(t){t in this.nodeElement?this.native.init(t):t in this.context.directives?this.directive.init(t):t==="component"&&this.component?await this.component():u(this.nodeElement.nodepath,104,t)}};var S=class extends w{constructor(...t){super(...t);let{node:e,context:o,nodeElement:i,impress:s,app:r,keyNode:c}=this;this.basic=new P(e,o,i,s,r,c),this.iterate=new _(e,o,i,s,r,c)}async component(){if(this.nodeElement.hasAttribute("section"))return h(this.nodeElement.nodepath,207);if(this.nodeElement.hasAttribute("iterable"))return h(this.nodeElement.nodepath,208);this.node.component.iterate?await this.iterate.init():await this.basic.init()}};function it(n){let{root:t,plugins:e={},directives:o={}}=n;Object.assign(e,q);let i={root:t,plugins:e,directives:o,async mount(s,r,c,a,p={}){a=a||i.root;let d=a.nodepath||"root";r&&!(r instanceof AbortSignal)&&h(d,217),c&&typeof c!="function"&&h(d,218);let g=await x(s,r);if(!g)return h(d,216);let Z=new D(J(g),i,r,S),rt=i.plugins.router?.to.route.static;return await $(Z,()=>X(a,Z,p,rt),c,p)},async unmount(){await i.root.unmount()}};return n.stores&&k(n.stores).init(i),i}async function st(n,t,e,o){if(!n)return h("root",216);e&&!(e instanceof AbortSignal)&&h("root",217),o&&typeof o!="function"&&h("root",218);let i=new E(n,{plugins:q},e,w);return await $(i,()=>{t.innerHTML=n.template,i.context.container=t},o),{destroy(){delete t.reactivity,delete t.method,t.innerHTML=""}}}window.lesta={createApp:it,createWidget:st,debounce:R,throttling:z,delay:W,replicate:m,deliver:j,mapProps:V,deleteReactive:O,loadModule:x,uid:F,queue:M,deepFreeze:C};})();
